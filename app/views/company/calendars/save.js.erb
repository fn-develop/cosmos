<% if @calendar.valid? %>
  <% if params[:id].present? %>
    document.dispatchEvent(new CustomEvent('remove_event', { detail: '<%= params[:id] %>' }));
  <% end %>
  document.dispatchEvent(new CustomEvent('add_event', { detail: JSON.parse('<%= @calendar.json_calendar_event.html_safe %>') }));
  $('[data-izimodal-close]')[0].click();
<% else %>
  alert('<%= @calendar.errors.full_messages.first %>');
<% end %>
